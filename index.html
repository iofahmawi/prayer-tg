<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…ÙˆÙ„Ø¯ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</title>
  
  <meta name="theme-color" content="#eff6ff">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-1024.png">
  <link rel="apple-touch-icon" href="icon-1024.png">
  
  <!-- 1. ØªÙØ¹ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- 2. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…ÙƒØªØ¨Ø§Øª React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  
  <!-- 3. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Babel Ù„ØªØ­ÙˆÙŠÙ„ JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- 4. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…ÙƒØªØ¨Ø© SheetJS Ù„ØªØµØ¯ÙŠØ± Ù…Ù„ÙØ§Øª Excel -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

</head>
<body>

  <!-- Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø°ÙŠ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠÙ‡ -->
  <div id="root"></div>

  <!-- 5. ÙˆØ¶Ø¹ ÙƒÙˆØ¯ React Ù‡Ù†Ø§ Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†ÙˆØ¹ "text/babel" -->
  <script type="text/babel">
    const { useState, useRef } = React;

    const governorateSettings = {
      amman: { displayName: "Ø¹Ù…Ù‘Ø§Ù†", lat: "31.955", lon: "35.945", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "0", sunrise: "-6.64", dhuhr: "0.45", asr: "0", maghrib: "6.84", isha: "0" } },
      zarqa: { displayName: "Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡", lat: "32.083", lon: "36.089", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "0.38", sunrise: "-6.36", dhuhr: "0.92", asr: "0.93", maghrib: "7.69", isha: "0.70" } },
      irbid: { displayName: "Ø¥Ø±Ø¨Ø¯", lat: "32.556", lon: "35.844", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "-0.47", sunrise: "-5.64", dhuhr: "0.19", asr: "0", maghrib: "6.14", isha: "-0.21" } },
      ajloun: { displayName: "Ø¹Ø¬Ù„ÙˆÙ† Ùˆ Ø¬Ø±Ø´", lat: "32.332", lon: "35.751", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "-2.31", sunrise: "-7.68", dhuhr: "-1.71", asr: "-2.03", maghrib: "4.39", isha: "-2.16" } },
      mafraq: { displayName: "Ø§Ù„Ù…ÙØ±Ù‚", lat: "32.341", lon: "36.203", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "0.50", sunrise: "-6.52", dhuhr: "1.37", asr: "1.93", maghrib: "8.75", isha: "1.49" } },
      karak: { displayName: "Ø§Ù„ÙƒØ±Ùƒ", lat: "31.181", lon: "35.762", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "0.12", sunrise: "-6.99", dhuhr: "0.18", asr: "0.05", maghrib: "7.44", isha: "-0.06" } },
      tafilah: { displayName: "Ø§Ù„Ø·ÙÙŠÙ„Ø©", lat: "30.835", lon: "35.604", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "-0.067", sunrise: "-8.01", dhuhr: "-0.03", asr: "-0.16", maghrib: "8.01", isha: "-0.37" } },
      maan: { displayName: "Ù…Ø¹Ø§Ù†", lat: "30.195", lon: "35.734", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "0.16", sunrise: "-6.42", dhuhr: "-0.07", asr: "-0.18", maghrib: "6.57", isha: "-0.39" } },
      aqaba: { displayName: "Ø§Ù„Ø¹Ù‚Ø¨Ø©", lat: "29.527", lon: "35.008", tz: "3", fajrDep: "18.05", ishaDep: "18.11", asrShadow: "1", offsets: { fajr: "0.12", sunrise: "-2.63", dhuhr: "-0.09", asr: "-0.18", maghrib: "2.65", isha: "-0.35" } }
    };
    
    // ====================================================================
    // Prayer Time Calculation Engine (No changes here)
    // ====================================================================
    function pad(n){return n<10? '0'+n : ''+n}
    function deg2rad(d){return d*Math.PI/180}
    function rad2deg(r){return r*180/Math.PI}
    function julianDay(y,m,d){const a=Math.floor((14-m)/12);const Y=y+4800-a;const M=m+12*a-3;const JDN=d+Math.floor((153*M+2)/5)+365*Y+Math.floor(Y/4)-Math.floor(Y/100)+Math.floor(Y/400)-32045;return JDN-0.5}
    function sunCoords(JD){const T=(JD-2451545)/36525;const L0=(280.46646+T*(36000.76983+T*0.0003032))%360;const M=357.52911+T*(35999.05029-T*0.0001537);const e=0.016708634-T*(0.000042037+T*0.0000001267);const C=(1.914602-T*(0.004817+T*0.000014))*Math.sin(deg2rad(M))+(0.019993-T*0.000101)*Math.sin(deg2rad(2*M))+0.000289*Math.sin(deg2rad(3*M));const trueLong=L0+C;const omega=125.04-1934.136*T;const lambdaSun=trueLong-0.00569-0.00478*Math.sin(deg2rad(omega));const eps0=23+(26+((21.448-T*(46.815+T*(0.00059-T*0.001813)))/60))/60;const eps=eps0+0.00256*Math.cos(deg2rad(omega));const decl=rad2deg(Math.asin(Math.sin(deg2rad(eps))*Math.sin(deg2rad(lambdaSun))));const y=Math.tan(deg2rad(eps/2))**2;const EoT=4*rad2deg(y*Math.sin(2*deg2rad(L0))-2*e*Math.sin(deg2rad(M))+4*e*y*Math.sin(deg2rad(M))*Math.cos(2*deg2rad(L0))-.5*y*y*Math.sin(4*deg2rad(L0))-1.25*e*e*Math.sin(2*deg2rad(M)));return{decl,EoT}}
    function eventLocalMinutes(y,m,d,zenith,lat,lon,tz,morning=false){const JD0=julianDay(y,m,d);const{decl,EoT}=sunCoords(JD0+.5);const latRad=deg2rad(lat);const declRad=deg2rad(decl);let num=Math.cos(deg2rad(zenith))-Math.sin(latRad)*Math.sin(declRad);let den=Math.cos(latRad)*Math.cos(declRad);let ratio=num/den;if(ratio>1||ratio<-1)return null;const H=rad2deg(Math.acos(ratio));const solarNoonUTC=720-4*lon-EoT;const eventUTCMin=morning?(solarNoonUTC-H*4):(solarNoonUTC+H*4);return eventUTCMin+tz*60}
    function asrLocalMinutes(y,m,d,shadow,lat,lon,tz){const JD0=julianDay(y,m,d);const{decl}=sunCoords(JD0+.5);const alt=rad2deg(Math.atan(1/(shadow+Math.abs(Math.tan(deg2rad(lat-decl))))));const zen=90-alt;return eventLocalMinutes(y,m,d,zen,lat,lon,tz,false)}
    function formatPrayerTime(minutes,prayerName){if(minutes===null)return"     ";let totalMinutes=(prayerName==='asr')?Math.ceil(minutes):Math.round(minutes);totalMinutes=(totalMinutes%1440+1440)%1440;const H=Math.floor(totalMinutes/60);const M=totalMinutes%60;return`${pad(H)}:${pad(M)}`}
    function calculateYearPrayerTimes(Y,params){const{lat,lon,tz,fajrDep,ishaDep,asrShadow,offsets}=params;const rows=[];const isLeapYear=(Y%4===0&&Y%100!==0)||(Y%400===0);const daysInYear=isLeapYear?366:365;for(let dayOfYear=1;dayOfYear<=daysInYear;dayOfYear++){const date=new Date(Y,0,dayOfYear);const month=date.getMonth()+1;const day=date.getDate();const solarNoonUTCmin=720-4*lon-sunCoords(julianDay(Y,month,day)+.5).EoT;const fajrMinutes=eventLocalMinutes(Y,month,day,90+Number(fajrDep),lat,lon,tz,true)+Number(offsets.fajr);const sunriseMinutes=eventLocalMinutes(Y,month,day,90.833,lat,lon,tz,true)+Number(offsets.sunrise);const dhuhrMinutes=solarNoonUTCmin+(tz*60)+Number(offsets.dhuhr);const asrMinutes=asrLocalMinutes(Y,month,day,Number(asrShadow),lat,lon,tz)+Number(offsets.asr);const maghribMinutes=eventLocalMinutes(Y,month,day,90.833,lat,lon,tz,false)+Number(offsets.maghrib);const ishaMinutes=eventLocalMinutes(Y,month,day,90+Number(ishaDep),lat,lon,tz,false)+Number(offsets.isha);rows.push({date:`${Y}-${pad(month)}-${pad(day)}`,fajr:formatPrayerTime(fajrMinutes,'fajr'),sunrise:formatPrayerTime(sunriseMinutes,'sunrise'),dhuhr:formatPrayerTime(dhuhrMinutes,'dhuhr'),asr:formatPrayerTime(asrMinutes,'asr'),maghrib:formatPrayerTime(maghribMinutes,'maghrib'),isha:formatPrayerTime(ishaMinutes,'isha')})}return rows}
    
    const PrayerTimesGenerator = () => {
      const [year, setYear] = useState('2025');
      const [loading, setLoading] = useState(false);
      const [generatedData, setGeneratedData] = useState(null);
      const fileInputRef = useRef(null);
      const [isCityModalOpen, setIsCityModalOpen] = useState(false);
      const [params, setParams] = useState(null);
      const [isExportModalOpen, setIsExportModalOpen] = useState(false);
      
      const generateYearData = (targetYear, customParams) => {
        if (!targetYear || isNaN(targetYear)) return;
        setLoading(true);
        const paramsToUse = customParams || params;
        setTimeout(() => {
          const result = calculateYearPrayerTimes(targetYear, paramsToUse);
          setGeneratedData(result);
          setLoading(false);
        }, 100);
      };

      const downloadCSV = () => {
        if (!generatedData) return;
        const headers = ["DATE", "FAJR", "SUNRISE", "DHUHR", "ASR", "MAGHRIB", "ISHA"];
        let csvContent = headers.join(',') + '\n';
        generatedData.forEach(row => {
          const values = [row.date, row.fajr, row.sunrise, row.dhuhr, row.asr, row.maghrib, row.isha];
          csvContent += values.join(',') + '\n';
        });
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `prayer-times-${year}.csv`;
        a.click();
        window.URL.revokeObjectURL(url);
        setIsExportModalOpen(false);
      };

      const downloadJSON = () => {
        if (!generatedData) return;
        const jsonString = JSON.stringify(generatedData, null, 2);
        const blob = new Blob([jsonString], { type: 'application/json;charset=utf-8;' });
        const a = document.createElement('a');
        a.href = window.URL.createObjectURL(blob);
        a.download = `prayer-times-${year}.json`;
        a.click();
        window.URL.revokeObjectURL(a.href);
        setIsExportModalOpen(false);
      };
      
      const downloadExcel = () => {
        if (!generatedData) return;
        const wb = XLSX.utils.book_new();
        const ws_data = [];
        const headers = ["Ø§Ù„ØªØ§Ø±ÙŠØ®", "Ø§Ù„ÙØ¬Ø±", "Ø§Ù„Ø´Ø±ÙˆÙ‚", "Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù…ØºØ±Ø¨", "Ø§Ù„Ø¹Ø´Ø§Ø¡"];
        ws_data.push(headers);
        generatedData.forEach(row => {
          ws_data.push([row.date, row.fajr, row.sunrise, row.dhuhr, row.asr, row.maghrib, row.isha]);
        });
        const ws = XLSX.utils.aoa_to_sheet(ws_data);
        ws['!view'] = { RTL: true };
        ws['!cols'] = [
          { wch: 12 }, { wch: 8 }, { wch: 8 }, { wch: 8 }, 
          { wch: 8 }, { wch: 8 }, { wch: 8 }
        ];
        const headerStyle = { font: { bold: true, color: { rgb: "FFFFFF" } }, fill: { fgColor: { rgb: "4A5568" } }, alignment: { vertical: "center", horizontal: "center" } };
        const cellStyle = { alignment: { vertical: "center", horizontal: "center" } };
        const range = XLSX.utils.decode_range(ws['!ref']);
        for (let R = range.s.r; R <= range.e.r; ++R) {
          for (let C = range.s.c; C <= range.e.c; ++C) {
            const cell_ref = XLSX.utils.encode_cell({c: C, r: R});
            if (ws[cell_ref]) {
              ws[cell_ref].s = (R === 0) ? headerStyle : cellStyle;
            }
          }
        }
        XLSX.utils.book_append_sheet(wb, ws, "Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©");
        XLSX.writeFile(wb, `Ù…ÙˆØ§Ù‚ÙŠØª-ØµÙ„Ø§Ø©-${year}.xlsx`);
        setIsExportModalOpen(false);
      };

      const handleImportClick = () => { fileInputRef.current.click(); };
      const handleFileChange = (event) => {
        const file = event.target.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const imported = JSON.parse(e.target.result);
            const newParams = { displayName: "Ù…Ù„Ù Ù…Ø®ØµØµ", lat: imported.lat, lon: imported.lon, tz: imported.tz, fajrDep: imported.fajrDep, ishaDep: imported.ishaDep, asrShadow: imported.asrShadow,
              offsets: { fajr: imported.fajrOffset, sunrise: imported.sunriseOffset, dhuhr: imported.dhuhrOffset, asr: imported.asrOffset, maghrib: imported.magOffset, isha: imported.ishaOffset }
            };
            const newYear = imported.year || year;
            setYear(newYear); setParams(newParams);
            generateYearData(parseInt(newYear), newParams);
          } catch (error) { alert('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù.'); }
        };
        reader.readAsText(file);
        event.target.value = null; 
      };

      const handleCitySelect = (cityKey) => {
        const selectedSettings = governorateSettings[cityKey];
        if (!selectedSettings) return;
        setParams(selectedSettings);
        generateYearData(parseInt(year), selectedSettings);
        setIsCityModalOpen(false);
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-8">
          <div className="max-w-6xl mx-auto">
            <div className="text-center mb-8">
                <h1 className="text-4xl font-bold mb-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent">Ù…ÙˆÙ„Ø¯ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h1>
                <p className="text-xl text-gray-600">Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠØ© Ø§Ù„Ù‡Ø§Ø´Ù…ÙŠØ©</p>
            </div>
            
            <div className="bg-white rounded-3xl shadow-2xl p-8 mb-8">
              <div className="max-w-md mx-auto mb-6">
                  <input type="number" value={year} onChange={(e) => setYear(e.target.value)} min="1900" max="2100" className="w-full p-4 text-2xl text-center border-2 border-indigo-300 rounded-xl focus:border-indigo-600 focus:outline-none font-bold" placeholder="Ù…Ø«Ø§Ù„: 2025" />
              </div>
              <div className="flex flex-col gap-4 max-w-lg mx-auto">
                <button onClick={() => setIsCityModalOpen(true)} disabled={loading} className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transition-all">{loading ? 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...' : 'ğŸš€ ØªÙˆÙ„ÙŠØ¯ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©'}</button>
                <button onClick={handleImportClick} className="w-full bg-gradient-to-r from-gray-600 to-gray-800 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-gray-700 hover:to-gray-900 shadow-lg transition-all">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„Ù Ù…Ø¹Ø§ÙŠØ±Ø©</button>
                <input type="file" ref={fileInputRef} onChange={handleFileChange} accept=".json" style={{ display: 'none' }} />
                {generatedData && (<button onClick={() => setIsExportModalOpen(true)} className="w-full bg-gradient-to-r from-green-600 to-teal-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-green-700 hover:to-teal-700 shadow-lg transition-all">â¬‡ï¸ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>)}
              </div>
            </div>
            
            {params && generatedData && (
              <div className="bg-white rounded-3xl shadow-2xl p-8 mb-8">
                <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
                <div className="mb-6"><h3 className="text-lg font-semibold text-gray-700 mb-3 border-b pb-2">Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3><div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center"><div className="bg-indigo-50 p-3 rounded-lg"><p className="text-sm text-indigo-800 font-bold">Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶</p><p className="text-lg font-mono">{params.lat}Â°</p></div><div className="bg-indigo-50 p-3 rounded-lg"><p className="text-sm text-indigo-800 font-bold">Ø®Ø· Ø§Ù„Ø·ÙˆÙ„</p><p className="text-lg font-mono">{params.lon}Â°</p></div><div className="bg-indigo-50 p-3 rounded-lg"><p className="text-sm text-indigo-800 font-bold">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</p><p className="text-lg font-mono">UTC+{params.tz}</p></div><div className="bg-indigo-50 p-3 rounded-lg"><p className="text-sm text-indigo-800 font-bold">Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙØ¬Ø±</p><p className="text-lg font-mono">{params.fajrDep}Â°</p></div><div className="bg-indigo-50 p-3 rounded-lg"><p className="text-sm text-indigo-800 font-bold">Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø´Ø§Ø¡</p><p className="text-lg font-mono">{params.ishaDep}Â°</p></div><div className="bg-indigo-50 p-3 rounded-lg"><p className="text-sm text-indigo-800 font-bold">Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø¹ØµØ±</p><p className="text-lg font-mono">{params.asrShadow}</p></div></div></div>
                <div><h3 className="text-lg font-semibold text-gray-700 mb-3 border-b pb-2">Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ¹ÙˆÙŠØ¶ (Offsets)</h3><div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center"><div className="bg-green-50 p-3 rounded-lg"><p className="text-sm text-green-800 font-bold">Ø§Ù„ÙØ¬Ø±</p><p className="text-lg font-mono">{params.offsets.fajr} Ø¯</p></div><div className="bg-green-50 p-3 rounded-lg"><p className="text-sm text-green-800 font-bold">Ø§Ù„Ø´Ø±ÙˆÙ‚</p><p className="text-lg font-mono">{params.offsets.sunrise} Ø¯</p></div><div className="bg-green-50 p-3 rounded-lg"><p className="text-sm text-green-800 font-bold">Ø§Ù„Ø¸Ù‡Ø±</p><p className="text-lg font-mono">{params.offsets.dhuhr} Ø¯</p></div><div className="bg-green-50 p-3 rounded-lg"><p className="text-sm text-green-800 font-bold">Ø§Ù„Ø¹ØµØ±</p><p className="text-lg font-mono">{params.offsets.asr} Ø¯</p></div><div className="bg-green-50 p-3 rounded-lg"><p className="text-sm text-green-800 font-bold">Ø§Ù„Ù…ØºØ±Ø¨</p><p className="text-lg font-mono">{params.offsets.maghrib} Ø¯</p></div><div className="bg-green-50 p-3 rounded-lg"><p className="text-sm text-green-800 font-bold">Ø§Ù„Ø¹Ø´Ø§Ø¡</p><p className="text-lg font-mono">{params.offsets.isha} Ø¯</p></div></div></div>
              </div>
            )}

            {generatedData && (
              <div className="bg-white rounded-3xl shadow-2xl p-8 mb-8">
                  <h2 className="text-2xl font-bold text-gray-800 mb-4 text-center">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ„Ø¯Ø© - {year}</h2>
                  <p className="text-center text-gray-600 mb-6">ØªÙ… ØªÙˆÙ„ÙŠØ¯ {generatedData.length} ÙŠÙˆÙ… Ø¨Ù†Ø¬Ø§Ø­ âœ…</p>
                  <div className="overflow-auto max-h-[32rem]">
                    <table className="w-full text-sm"><thead className="sticky top-0 z-10 bg-gradient-to-r from-indigo-100 to-purple-100"><tr><th className="p-3 text-right font-bold whitespace-nowrap">Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th className="p-3 font-bold whitespace-nowrap">Ø§Ù„ÙØ¬Ø±</th><th className="p-3 font-bold whitespace-nowrap">Ø§Ù„Ø´Ø±ÙˆÙ‚</th><th className="p-3 font-bold whitespace-nowrap">Ø§Ù„Ø¸Ù‡Ø±</th><th className="p-3 font-bold whitespace-nowrap">Ø§Ù„Ø¹ØµØ±</th><th className="p-3 font-bold whitespace-nowrap">Ø§Ù„Ù…ØºØ±Ø¨</th><th className="p-3 font-bold whitespace-nowrap">Ø§Ù„Ø¹Ø´Ø§Ø¡</th></tr></thead>
                      <tbody>{generatedData.map((row, idx) => (<tr key={idx} className="border-b hover:bg-indigo-50 transition-colors"><td className="p-3 font-semibold text-gray-700 whitespace-nowrap">{row.date}</td><td className="p-3 text-center whitespace-nowrap">{row.fajr}</td><td className="p-3 text-center whitespace-nowrap">{row.sunrise}</td><td className="p-3 text-center whitespace-nowrap">{row.dhuhr}</td><td className="p-3 text-center whitespace-nowrap">{row.asr}</td><td className="p-3 text-center whitespace-nowrap">{row.maghrib}</td><td className="p-3 text-center whitespace-nowrap">{row.isha}</td></tr>))}</tbody>
                    </table>
                  </div>
              </div>
            )}
          </div>

          {isCityModalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onClick={() => setIsCityModalOpen(false)}>
              <div className="bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm" onClick={(e) => e.stopPropagation()}>
                <h2 className="text-2xl font-bold text-center mb-6 text-gray-800">Ø§Ø®ØªØ± Ù…Ø­Ø§ÙØ¸Ø©</h2>
                <div className="grid grid-cols-2 gap-3">
                  {Object.entries(governorateSettings).map(([key, city]) => (<button key={key} onClick={() => handleCitySelect(key)} className="w-full text-center p-3 bg-gray-100 rounded-lg font-semibold text-gray-700 hover:bg-indigo-100 hover:text-indigo-700 transition-colors">{city.displayName}</button>))}
                </div>
              </div>
            </div>
          )}
          
          {isExportModalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onClick={() => setIsExportModalOpen(false)}>
              <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-sm" onClick={(e) => e.stopPropagation()}>
                <h2 className="text-2xl font-bold text-center mb-6 text-gray-800">Ø§Ø®ØªØ± ØµÙŠØºØ© Ø§Ù„ØªØµØ¯ÙŠØ±</h2>
                <div className="flex flex-col gap-4">
                  <button onClick={downloadExcel} className="w-full text-center p-4 bg-green-100 text-green-800 rounded-lg font-bold hover:bg-green-200 transition-colors text-lg">
                    ğŸ“— Excel
                  </button>
                  <button onClick={downloadCSV} className="w-full text-center p-4 bg-blue-100 text-blue-800 rounded-lg font-bold hover:bg-blue-200 transition-colors text-lg">
                    ğŸ“„ CSV
                  </button>
                  <button onClick={downloadJSON} className="w-full text-center p-4 bg-purple-100 text-purple-800 rounded-lg font-bold hover:bg-purple-200 transition-colors text-lg">
                    {`{ } JSON`}
                  </button>
                </div>
              </div>
            </div>
          )}

        </div>
      );
    };
    
    ReactDOM.render(<PrayerTimesGenerator />, document.getElementById('root'));
  </script>
  
  <script>
    if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('sw.js').then(registration => { console.log('SW registration successful:', registration.scope); }).catch(err => { console.log('SW registration failed:', err); }); }); }
  </script>

</body>
</html>